<html lang="ko">
    <head>
        <link rel='stylesheet' type="text/css" id="changeStyle" href="./pc.css">
        <script>
            function calculate() {
                
                var length = document.getElementById('length');
                var width = document.getElementById('width');
                var output = document.getElementById('output');
                var output2 = document.getElementById('output2');
                var output3 = document.getElementById('output3');
                var color = document.getElementById('color');
                var option = document.getElementById('option');
                var cnt = document.getElementById('cnt')
                var subtract = document.getElementById('subtract');
                var add = document.getElementById('add');
                var freeship = document.getElementById('freeship');
                var plus = document.getElementById('plus');
                
            
                if (eval(length.value) < 300 || eval(length.value) > 2400){
                    return
                }
                if (eval(width.value) < 300 || eval(width.value) > 1200){
                    return
                }
            
                if (color.options[color.selectedIndex].text == "백색"){
                    // option.value = "백색" + "/폭" + width.value + "mmx길이" + length.value + "mm"
                    option.value = "백색" + "/길이" + length.value + "mmx폭" + width.value + "mm"
                    output.value = insertCommas(Math.round(eval(length.value) * eval(width.value) * 0.191268)).toString() + "원"
                    // output.value = Math.round(eval(length.value) * eval(width.value) * 0.1863).toString() + "원"
                    output2.value = output.value
                    output3.value = Math.floor(eval(length.value) * eval(width.value) * 0.191268 / 1000) + "개"
                    cnt.value = 1
                    output.style.visibility = "visible";
                    output2.style.visibility = "visible";
                    output3.style.visibility = "visible";
                    subtract.style.visibility = "visible";
                    cnt.style.visibility = "visible";
                    add.style.visibility = "visible";
                    option.style.visibility = "visible";
                    
                    freeship.style.visibility = "visible";
                    plus.style.visibility = "visible";
                }
                else if (color.options[color.selectedIndex].text == "적색"){
                    // option.value = "적색" + "/폭" + width.value + "mmx길이" + length.value + "mm"
                    option.value = "적색" + "/길이" + length.value + "mmx폭" + width.value + "mm"
                    output.value = insertCommas(Math.round(eval(length.value) * eval(width.value) * 0.2103948)).toString() + "원"
                    // output.value = Math.round(eval(length.value) * eval(width.value) * 0.177606).toString() + "원"
                    output2.value = output.value
                    output3.value = Math.floor(eval(length.value) * eval(width.value) * 0.2103948 / 1000) + "개"
                    cnt.value = 1
                    output.style.visibility = "visible";
                    output2.style.visibility = "visible";
                    output3.style.visibility = "visible";
                    subtract.style.visibility = "visible";
                    cnt.style.visibility = "visible";
                    add.style.visibility = "visible";
                    option.style.visibility = "visible";
                    
                    freeship.style.visibility = "visible";
                    plus.style.visibility = "visible";
                }  
            
                
            }
            
            function insertCommas(n) {
                // get stuff before the dot
                let s1 = n.toString();
                var d = s1.indexOf('.');
                var s2 = d === -1 ? s1 : s1.slice(0, d);
              
                // insert commas every 3 digits from the right
                for (var i = s2.length - 3; i > 0; i -= 3)
                  s2 = s2.slice(0, i) + ',' + s2.slice(i);
              
                // append fractional part
                if (d !== -1)
                  s2 += s1.slice(d);
              
                return s2;
              }
            
            function add() {
                var cnt = document.getElementById('cnt');
                cnt.value = eval(cnt.value) + 1;
                var int_output = Math.round(eval(output.value.slice(0, -1).replace(/,/g , '')) * (eval(cnt.value) / (eval(cnt.value) - 1)));
                // var str_output = int_output.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원";
                var str_output = insertCommas(int_output).toString() + "원";
                // var str_output = int_output.toString();
                output.value = str_output;
                output2.value = output.value;
                output3.value = Math.floor(int_output / 1000) + "개";
            }
            
            function subtract() {
                var cnt = document.getElementById('cnt');
                if (eval(cnt.value) > 1){
                    cnt.value = eval(cnt.value) - 1;
                    var int_output = Math.round(eval(output.value.slice(0, -1).replace(/,/g , '')) * (eval(cnt.value) / (eval(cnt.value) + 1)));
                    // var str_output = int_output.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",") + "원";
                    // var str_output = int_output.toString();
                    var str_output = insertCommas(int_output).toString() + "원";
                    output.value = str_output;
                
                    output2.value = output.value;
                    output3.value = Math.floor(int_output / 1000) + "개";
                }
                
            }
            
            function hide() {
                var output = document.getElementById('output');
                var output2 = document.getElementById('output2');
                var output3 = document.getElementById('output3');
                var subtract = document.getElementById('subtract');
                var cnt = document.getElementById('cnt');
                var add = document.getElementById('add');
                var option = document.getElementById('option');
            
                var freeship = document.getElementById('freeship');
                var plus = document.getElementById('plus');
            
                output.style.visibility = "hidden";
                output2.style.visibility = "hidden";
                output3.style.visibility = "hidden";
                subtract.style.visibility = "hidden";
                cnt.style.visibility = "hidden";
                add.style.visibility = "hidden";
                option.style.visibility = "hidden";
                
                freeship.style.visibility = "hidden";
                plus.style.visibility = "hidden";
            }

            function codeAddress() {
                var filter = "win16|win32|win64|mac|macintel";
                var ch = document.getElementById('changeStyle');

                if ( navigator.platform ) {
                    if ( filter.indexOf( navigator.platform.toLowerCase() ) < 0 ) {
                        //mobile
                        // alert('mobile 접속');
                        ch.href=('./mobile.css');
                        document.getElementById("themeframe").style.height = '1800px';  
                        
                    } else {
                        //pc
                        // alert('pc 접속');
                        ch.href=('./pc.css');
                        document.getElementById("themeframe").style.height = '800px';  
                    }
                }
            }
        </script>
    </head>
    <body onload="codeAddress()">
        <div class="total_area">
            <!-- 1번 텍스트 -->
            <div class="margin_auto">
                <p class="numtext">&#9312; 도마 사이즈를 입력하고 견적내기를 눌러주세요</p>
            </div>
            <!-- 칼라 선택, 사이즈, 견적내기 영역-->
            <div class="main_area">
                <!-- 칼라선택 row -->
                <div class="container">
                    <!-- 칼라 선택 text -->
                    <div class="colorselect">칼라선택</div>
                    <!-- 칼라 선택 select box -->
                    <select id="color" class="selectbox">
                        <option value="none" class="opt">선택하세요</option>
                        <option value="white" class="opt">백색</option>
                        <option value="red" class="opt">적색</option>
                    </select>
                </div>
                <!-- 사이즈 row -->
                <div class="container">
                    <!-- 사이즈 text -->
                    <div class="size">사이즈</div>
                    <!-- 길이, 폭 영역 -->
                    <span class="length_width_Box">
                        <!-- 길이 영역 -->
                        <div class="length_wrap">
                            <!-- 길이 text & input box & mm text-->
                            <div class="length">
                                <span>길이</span>
                                <input type="text" id="length" class="inputbox">
                                <span>mm</span>
                            </div>
                            <!-- 하단 text -->
                            <div class="small_text">
                                <span>길이는 300~2400mm 까지 입력할 수 있습니다.</span>
                            </div>
                        </div>
                        <!-- 폭 영역 -->
                        <div class="width_wrap">
                            <!-- 폭 text & input box & mm text -->
                            <div class="length pok">
                                <span>폭</span>
                                <input type="text" id="width" class="inputbox">
                                <span>mm</span>
                            </div>
                            <!-- 하단 text -->
                            <div class="small_text">
                                <span>폭은 300~1200mm 까지 입력할 수 있습니다.</span>
                            </div>
                        </div>
                    <!-- 길이, 폭 영역 마지막-->   
                    </span>
                    <!-- 사이즈 row 마지막-->
                </div>
                <!-- 견적내기 버튼 -->
                <div class="calculate">
                    <input type='button' value='견적내기' onclick="calculate()" class="cal_btn">
                </div>
            </div>

            <!-- 2번 텍스트 -->
            <div class="container margin_auto margin_between">
                <p class="numtext">&#9313; 아래 견적을 복사하신후 ▶ 구매하기 버튼위 옵션창에 <strong><U>붙혀넣기</U></strong>와 <strong><U>수량</U></strong>을 입력해주세요</p>
            </div>
            <!-- 그 아래 영역 -->
            <div class="second_area">
                <div class="price_info">
                    <span class="pi1">
                        <input type="text" id="option" class="border_none hide output_opt">
                    </span>
                    <div class="btn_price_x">
                        <span class="btn_set">
                            <span><input type='button' value='-' class="hide sub_btn" onclick="subtract()" id="subtract"></span>
                            <span><input type="text" id="cnt" value="1" class="border_none hide ctn_num"></span>
                            <span><input type='button' value='+' class="hide sub_btn" onclick="add()" id="add"></span>
                        </span>
                        <span class="output_class_upper">
                            <input type="text" id="output" class="border_none hide output_class">
                        </span>
                        <span><input type='button' value='x' class="border_none x_button" onclick="hide()"></span>
                    </div>
                    
                    
                </div>
            
    
                
            </div>
            <!-- 총 금액 영역 -->
            <div class="total_price">
                <span class="total_price1">총금액</span>
                <span class="total_price2">
                    <span class="freeship_plus">
                        <span class="hide" id="freeship">(무료배송)</span>
                        <span class="hide" id="plus">+</span>
                    </span>

                    <span><input type="text" id="output2" class="border_none hide output3"></span>
                </span>
            </div>
            <!-- 천원단위 결제 수량 영역 -->
            <div class="unit">
                <span class="unit1">천원단위 결제 수량</span>
                <span class="unit2"><input type="text" id="output3" class="border_none hide unit3"></span>
            </div>
        </div>
        
    </body>
</html>